# AuraDrive Architecture - Visual Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AuraDrive App                             â”‚
â”‚                     (NaviSafe System)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    APP LAUNCH SEQUENCE                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    main.dart
       â†“
    Initialize Services:
    â”œâ”€ GnssService (GPS)
    â”œâ”€ MeshNetworkService (BLE)
    â””â”€ AccelerometerCollisionService (Sensors)
       â†“
    Splash Screen
       â†“
    Permissions Screen â†’ [Grant: Location, Bluetooth]
       â†“
    Navigation Screen âœ… [MAIN APP]


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘               NAVIGATION SCREEN COMPONENTS                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  App Bar: "NaviSafe Navigation"          ğŸ” âš™ï¸ ğŸ“¡    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Speed Display:   65 km/h  [GPS: High Accuracy]      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                                                       â”‚      â”‚
â”‚  â”‚                  MAP VIEW                             â”‚      â”‚
â”‚  â”‚              (OpenStreetMap)                          â”‚      â”‚
â”‚  â”‚                                                       â”‚      â”‚
â”‚  â”‚   ğŸ”µ â† You (blue marker)                            â”‚      â”‚
â”‚  â”‚                                                       â”‚      â”‚
â”‚  â”‚              ğŸŸ¢ â† Peer Device (far)                 â”‚      â”‚
â”‚  â”‚                                                       â”‚      â”‚
â”‚  â”‚   ğŸ”´ â† Peer Device (close, <50m warning)           â”‚      â”‚
â”‚  â”‚                                                       â”‚      â”‚
â”‚  â”‚        â”â”â”â”â” Route (blue line)                      â”‚      â”‚
â”‚  â”‚                                                       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  Floating Buttons:                                              â”‚
â”‚  [+] Zoom In   [-] Zoom Out   [âŠ™] Center   [ğŸ§­] Follow        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                 3 CORE SERVICES RUNNING                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SERVICE 1: GNSS Service (GPS Tracking) ğŸ“                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  GPS Satellite                                                   â”‚
â”‚      ğŸ›°ï¸                                                          â”‚
â”‚       â†“                                                          â”‚
â”‚  Phone GPS Chip                                                  â”‚
â”‚       â†“                                                          â”‚
â”‚  GnssService.startPositioning()                                  â”‚
â”‚       â†“                                                          â”‚
â”‚  Every 1 second:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚ Position Data:                 â”‚                             â”‚
â”‚  â”‚  â€¢ Latitude: 28.7041           â”‚                             â”‚
â”‚  â”‚  â€¢ Longitude: 77.1025          â”‚                             â”‚
â”‚  â”‚  â€¢ Speed: 65 km/h              â”‚                             â”‚
â”‚  â”‚  â€¢ Heading: 90Â° (East)         â”‚                             â”‚
â”‚  â”‚  â€¢ Accuracy: 5m                â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚       â†“                                                          â”‚
â”‚  positionStream â†’ Navigation Screen                              â”‚
â”‚       â†“                                                          â”‚
â”‚  Update Map Marker + Broadcast via BLE                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SERVICE 2: Mesh Network Service (BLE) ğŸ“¡                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   Your Phone    â”‚ â†BLEâ†’   â”‚  Other User's   â”‚               â”‚
â”‚  â”‚  (Device A)     â”‚         â”‚    Phone        â”‚               â”‚
â”‚  â”‚                 â”‚         â”‚   (Device B)    â”‚               â”‚
â”‚  â”‚ NaviSafe-ABC123 â”‚         â”‚ NaviSafe-XYZ789 â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚          â†‘                           â†‘                           â”‚
â”‚          â”‚                           â”‚                           â”‚
â”‚    Advertising                 Advertising                       â”‚
â”‚    Scanning                    Scanning                          â”‚
â”‚          â”‚                           â”‚                           â”‚
â”‚          â””â”€â”€â”€â”€â”€ Auto-Connect â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                  â”‚
â”‚  ADVERTISING (Broadcasting):                                     â”‚
â”‚  â€¢ Service UUID: 12345678-1234-1234-1234-123456789abc           â”‚
â”‚  â€¢ Name: "NaviSafe-XXXXXXXX"                                    â”‚
â”‚  â€¢ Every 10 seconds                                              â”‚
â”‚                                                                  â”‚
â”‚  SCANNING (Discovery):                                           â”‚
â”‚  â€¢ Look for "NaviSafe-*" devices                                â”‚
â”‚  â€¢ Filter: RSSI â‰¥ -79 dBm (30% signal)                          â”‚
â”‚  â€¢ Every 10 seconds                                              â”‚
â”‚                                                                  â”‚
â”‚  AUTO-CONNECT:                                                   â”‚
â”‚  â€¢ When NaviSafe device found â†’ Auto-connect                     â”‚
â”‚  â€¢ Max 20 connections                                            â”‚
â”‚  â€¢ Timeout: 30 seconds                                           â”‚
â”‚  â€¢ Retry: Up to 5 times                                          â”‚
â”‚                                                                  â”‚
â”‚  POSITION BROADCASTING:                                          â”‚
â”‚  Every 500ms:                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚ Your Position (JSON)           â”‚                             â”‚
â”‚  â”‚  {                             â”‚                             â”‚
â”‚  â”‚   deviceId: "abc123",          â”‚ â”€â”€BLEâ”€â”€â†’ Connected Devices  â”‚
â”‚  â”‚   lat: 28.7041,                â”‚                             â”‚
â”‚  â”‚   lon: 77.1025,                â”‚                             â”‚
â”‚  â”‚   speed: 65,                   â”‚                             â”‚
â”‚  â”‚   heading: 90                  â”‚                             â”‚
â”‚  â”‚  }                             â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚       â†“                                                          â”‚
â”‚  Peer devices receive â†’ Show on their maps                       â”‚
â”‚                                                                  â”‚
â”‚  POSITION RECEPTION:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚ Peer Position (from Device B)  â”‚                             â”‚
â”‚  â”‚  {                             â”‚                             â”‚
â”‚  â”‚   deviceId: "xyz789",          â”‚ â†BLEâ”€â”€ From Connected Deviceâ”‚
â”‚  â”‚   lat: 28.7050,                â”‚                             â”‚
â”‚  â”‚   lon: 77.1030,                â”‚                             â”‚
â”‚  â”‚   speed: 50,                   â”‚                             â”‚
â”‚  â”‚   heading: 180                 â”‚                             â”‚
â”‚  â”‚  }                             â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚       â†“                                                          â”‚
â”‚  Show peer marker on your map                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SERVICE 3: Accelerometer Collision Service âš ï¸                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Phone Accelerometer Sensor                                      â”‚
â”‚       â†“                                                          â”‚
â”‚  Continuous monitoring (100Hz)                                   â”‚
â”‚       â†“                                                          â”‚
â”‚  Calculate G-force:                                              â”‚
â”‚  magnitude = âˆš(xÂ² + yÂ² + zÂ²)                                    â”‚
â”‚       â†“                                                          â”‚
â”‚  Check Thresholds:                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ IF magnitude > 12G      â”‚ â†’ CRASH ALERT ğŸ”´                  â”‚
â”‚  â”‚ IF magnitude > 1.0G     â”‚ â†’ HARD BRAKE ğŸŸ                    â”‚
â”‚  â”‚ IF magnitude > 0.8G     â”‚ â†’ SHARP TURN ğŸŸ¡                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚       â†“                                                          â”‚
â”‚  Generate Alert                                                  â”‚
â”‚       â†“                                                          â”‚
â”‚  Show Dialog + Log Event                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              DATA FLOW: EVERY SECOND                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£  GPS updates position                                        â”‚
â”‚       â†“                                                          â”‚
â”‚  2ï¸âƒ£  GnssService emits new PositionData                          â”‚
â”‚       â†“                                                          â”‚
â”‚  3ï¸âƒ£  Navigation Screen receives update                           â”‚
â”‚       â†“                                                          â”‚
â”‚  4ï¸âƒ£  Map marker moves to new position                            â”‚
â”‚       â†“                                                          â”‚
â”‚  5ï¸âƒ£  Speed display updates                                       â”‚
â”‚       â†“                                                          â”‚
â”‚  6ï¸âƒ£  Position broadcast via BLE to connected devices             â”‚
â”‚       â†“                                                          â”‚
â”‚  7ï¸âƒ£  Other devices receive your position                         â”‚
â”‚       â†“                                                          â”‚
â”‚  8ï¸âƒ£  Your marker appears/moves on their maps                     â”‚
â”‚       â†“                                                          â”‚
â”‚  9ï¸âƒ£  Their positions sent back to you                            â”‚
â”‚       â†“                                                          â”‚
â”‚  ğŸ”Ÿ  Their markers appear/move on your map                       â”‚
â”‚                                                                  â”‚
â”‚  ğŸ”„ REPEAT EVERY SECOND                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          BLE MESH NETWORK: MULTI-DEVICE SCENARIO                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Device A (You)          Device B (Car 1)      Device C (Car 2)
            ğŸ“±                      ğŸ“±                     ğŸ“±
     NaviSafe-ABC123          NaviSafe-XYZ789       NaviSafe-PQR456
            â”‚                       â”‚                      â”‚
            â”‚â—„â”€â”€â”€â”€â”€â”€BLEâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                      â”‚
            â”‚                       â”‚                      â”‚
            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€BLEâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                       â”‚
            â”‚                       â”‚â—„â”€â”€â”€â”€BLEâ”€â”€â”€â”€â–ºDevice D
            â”‚                                     NaviSafe-LMN321
            â”‚
            â”‚â—„â”€â”€BLEâ”€â”€â–ºDevice E (Bike 1)
                     NaviSafe-GHI654

All devices continuously share positions:
- A sees: B, C, D, E on map
- B sees: A, C, D on map  
- C sees: A, B on map
- D sees: B, C on map
- E sees: A on map

Total connections per device limited to 20 max.


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                POSITION SHARING PROTOCOL                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Device A (Your Phone)
    â†“
Get GPS position every 1s
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Current Position:            â”‚
â”‚  Lat: 28.7041               â”‚
â”‚  Lon: 77.1025               â”‚
â”‚  Speed: 65 km/h             â”‚
â”‚  Heading: 90Â°               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
Check if changed:
  - Moved > 1 meter? âœ…
  - OR heading changed > 5Â°? âœ…
    â†“
YES â†’ Broadcast via BLE
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JSON Data (50 bytes):        â”‚
â”‚  {                           â”‚
â”‚    "deviceId": "abc123",     â”‚
â”‚    "timestamp": "2025...",   â”‚
â”‚    "latitude": 28.7041,      â”‚
â”‚    "longitude": 77.1025,     â”‚
â”‚    "speed": 65.0,            â”‚
â”‚    "heading": 90.0,          â”‚
â”‚    "accuracy": 5.2           â”‚
â”‚  }                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
Write to BLE Characteristic
(UUID: 12345678-1234-1234-1234-123456789abd)
    â†“
    â”œâ”€â”€â†’ Device B receives âœ…
    â”œâ”€â”€â†’ Device C receives âœ…
    â”œâ”€â”€â†’ Device D receives âœ…
    â””â”€â”€â†’ Device E receives âœ…
         â†“
    All connected devices update their maps
    showing your new position!


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  NETWORK PANEL VIEW                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mesh Network Status                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Discovered: 12 devices                            â”‚
â”‚  Connected: 5 devices                              â”‚
â”‚  Auto-Connect: âš¡ Active                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  ğŸ“± NaviSafe-ABC123 (You)                         â”‚
â”‚     RSSI: -45 dBm â–“â–“â–“â–“â–“ [100%]                   â”‚
â”‚     Status: ğŸŸ¢ Advertising                        â”‚
â”‚                                                    â”‚
â”‚  ğŸš— NaviSafe-XYZ789                               â”‚
â”‚     RSSI: -63 dBm â–“â–“â–“â–‘â–‘ [60%]                    â”‚
â”‚     Status: ğŸŸ¢ Connected                          â”‚
â”‚     Distance: 25m                                  â”‚
â”‚                                                    â”‚
â”‚  ğŸš™ NaviSafe-PQR456                               â”‚
â”‚     RSSI: -71 dBm â–“â–“â–‘â–‘â–‘ [40%]                    â”‚
â”‚     Status: ğŸŸ¢ Connected                          â”‚
â”‚     Distance: 40m                                  â”‚
â”‚                                                    â”‚
â”‚  ğŸï¸ NaviSafe-LMN321                               â”‚
â”‚     RSSI: -78 dBm â–“â–‘â–‘â–‘â–‘ [30%]                    â”‚
â”‚     Status: ğŸŸ¢ Connected                          â”‚
â”‚     Distance: 45m                                  â”‚
â”‚                                                    â”‚
â”‚  ğŸš• NaviSafe-GHI654                               â”‚
â”‚     RSSI: -82 dBm â–‘â–‘â–‘â–‘â–‘ [20%]                    â”‚
â”‚     Status: âš ï¸ Disconnected (weak signal)         â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  SIGNAL STRENGTH GUIDE                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RSSI (dBm)    Signal %    Quality      Range      Status
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
-30 to -50    100%        Excellent    0-10m      âœ… Auto-connect
-50 to -60    75-99%      Very Good    10-20m     âœ… Auto-connect
-60 to -70    50-74%      Good         20-35m     âœ… Auto-connect
-70 to -79    30-49%      Fair         35-45m     âœ… Auto-connect
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
-79          30%         THRESHOLD    ~45m       â† Current limit
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
-80 to -90    10-24%      Poor         50-65m     âŒ Rejected
-90 to -100   0-9%        Very Poor    65m+       âŒ Rejected


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    COLLISION DETECTION                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Accelerometer readings (continuous):
    â†“
Calculate total G-force:
magnitude = âˆš(xÂ² + yÂ² + zÂ²)
    â†“
Smooth with 10-sample average
    â†“
Check against thresholds:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IF magnitude > 12.0G                    â”‚
â”‚    â†“                                     â”‚
â”‚  ğŸ”´ CRASH DETECTED!                      â”‚
â”‚    â†“                                     â”‚
â”‚  Show Critical Alert Dialog              â”‚
â”‚  Log crash event                         â”‚
â”‚  (Future: Notify emergency services)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IF magnitude > 1.0G                     â”‚
â”‚    â†“                                     â”‚
â”‚  ğŸŸ  HARD BRAKING DETECTED!               â”‚
â”‚    â†“                                     â”‚
â”‚  Show Warning Toast                      â”‚
â”‚  Log event                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IF magnitude > 0.8G                     â”‚
â”‚    â†“                                     â”‚
â”‚  ğŸŸ¡ SHARP TURN DETECTED!                 â”‚
â”‚    â†“                                     â”‚
â”‚  Show Caution Toast                      â”‚
â”‚  Log event                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      STATE MANAGEMENT                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Provider Pattern (pub.dev/packages/provider)

main.dart:
    â†“
MultiProvider wraps entire app:
    â”œâ”€ GnssService
    â”œâ”€ MeshNetworkService  
    â””â”€ AccelerometerCollisionService
    â†“
All screens can access via:
    â†“
Consumer<GnssService>(
  builder: (context, gnssService, child) {
    // React to GPS updates
    return Text('Speed: ${gnssService.currentPosition.speed}');
  }
)
    â†“
When service calls notifyListeners():
    â†“
All Consumer widgets rebuild automatically!


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     BATTERY OPTIMIZATION                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GPS Service:
  âœ… Uses best accuracy only when needed
  âœ… Distance filter: 0 (but smart broadcasting)
  
BLE Service:
  âœ… Scans every 10s (not continuous)
  âœ… Broadcasts only when position changes >1m
  âœ… Uses writeWithoutResponse (faster, less power)
  âœ… Auto-disconnects weak signals (<30%)
  
Accelerometer:
  âœ… Normal sample rate (not ultra-high)
  âœ… Smoothing reduces processing
  âœ… Cooldown between alerts (5s)

Result: ~4-6 hours continuous use


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   TROUBLESHOOTING FLOW                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Problem: No devices found
    â†“
Check: Is Bluetooth ON? 
    â””â”€ NO â†’ Enable Bluetooth
    â””â”€ YES â†“
Check: Are permissions granted?
    â””â”€ NO â†’ Grant all permissions
    â””â”€ YES â†“
Check: Is other device running AuraDrive?
    â””â”€ NO â†’ Open AuraDrive on other phone
    â””â”€ YES â†“
Check: Are you close enough? (<45m)
    â””â”€ NO â†’ Move closer
    â””â”€ YES â†“
Check: Is RSSI > -79 dBm?
    â””â”€ NO â†’ Move closer or remove obstacles
    â””â”€ YES â†’ Should work! Check logs

Problem: Connection timeout
    â†“
Check: Signal strength
    â””â”€ Weak â†’ Move closer
    â””â”€ Strong â†“
Check: Too many BLE devices nearby?
    â””â”€ YES â†’ Move to quieter area
    â””â”€ NO â†“
Try: Restart Bluetooth
Try: Restart app
Try: Wait 30s (auto-retry)
